<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Descarga QR Din√°mico</title>
</head>
<body>
  <p>üîÑ Generando tu QR, un momento...</p>
  <script>
    // Obtener par√°metro "url" de la URL actual
    const params = new URLSearchParams(window.location.search);
    const enlaceOriginal = params.get("url");

    if (!enlaceOriginal) {
      document.body.innerHTML = "<h3>‚ùå Error: No se proporcion√≥ ninguna URL v√°lida.</h3>";
    } else {
      // Construir URL del QR
      const qrUrl = `https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(enlaceOriginal)}`;

      // Crear enlace <a> para descarga autom√°tica
      const link = document.createElement("a");
      link.href = qrUrl;
      link.download = "codigoQR.png";
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);

      // Tambi√©n mostrar el QR por si falla la descarga autom√°tica
      document.body.innerHTML += `<p>‚úÖ Si no se descarga autom√°ticamente, <a href="${qrUrl}" download="codigoQR.png">haz clic aqu√≠</a>.</p>`;
    }
  </script>
</body>
</html>
